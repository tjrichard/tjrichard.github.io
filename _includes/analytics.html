<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-172119466-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-172119466-2');
</script>

<!-- Segment -->
<script>
  /*
  받은 referrer url에서 www에서 / 까지를 host로 리턴합니다
  www.가 포함된 경우와 아닌 경우를 고려해 splitUrl을 리턴합니다
  */
  var referrer = document.referrer;
  if (referrer.split("://")[1].substring(0, 3) == "www") {
      var referrerHost = referrer.split("www.")[1];
      referrerHost = referrerHost.split("/")[0];
  }
  else {
      var referrerHost = referrer.split("://")[1];
      referrerHost = referrerHost.split("/")[0];
  }

  var userAgent = navigator.userAgent.toLowerCase();
  var browser;
  if(userAgent.indexOf('edge')>-1){
    browser='Microsoft Edge';
  }else if(userAgent.indexOf('whale')>-1){
    browser='Naver Whale';
  }else if(userAgent.indexOf('chrome')>-1){
    browser='Google Chrome';
  }else if(userAgent.indexOf('firefox')>-1){
    browser='Mozilla Firefox';
  }else{
    browser='Internet Explorer';
  }

  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="QmVYyLedpWWw5IGRhwvxW0DhG1Py1BCG";analytics.SNIPPET_VERSION="4.13.2";
  analytics.load("QmVYyLedpWWw5IGRhwvxW0DhG1Py1BCG");
  analytics.page({
    'Reffer Host': referrerHost
  });
  analytics.identify({
    'User Agent': userAgent,
    'Browser': browser
  });
}}();
  function downloadResume(target) {
    var href = target.href;
      analytics.track("Download Resume",{
        "url": "{{ page.url }}",
        "target": href
      })
  };
  function downloadPortfolio(target) {
    var href = target.href;
    analytics.track("Download Portfolio",{
      "url": "{{ page.url }}",
      "target": href
    })
  }
  function socialLink(target) {
    var href = target.href;
    analytics.track("Click Social Link",{
      "url": "{{ page.url }}",
      "target": href
    })
  }
  function clickedOutlink(target) {
    var href = target.href;
    console.log(target);
    console.log(href);
      analytics.track("Click Outlink",{
        "url": "{{ page.url }}",
        "target": href
      })
  };
</script>